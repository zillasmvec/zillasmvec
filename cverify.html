<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>SMVEC ZILLA | Department of Computer Science and Engineering</title>
    <link rel="icon" type="image/png" sizes="3300x2550" href="assets/img/zillalogo-01.png">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Baloo">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/fonts/ionicons.min.css">
    <link rel="stylesheet" href="assets/css/Contact-Form-Clean.css">
    <link rel="stylesheet" href="assets/css/Footer-Basic.css">
    <link rel="stylesheet" href="assets/css/Footer-Clean.css">
    <link rel="stylesheet" href="assets/css/Highlight-Blue.css">
    <link rel="stylesheet" href="assets/css/Navigation-Clean.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/Team-Grid.css">
</head>
<style>
     .main-img {
  width: 40%;
}

@media only screen and (max-width: 600px) {
  .main-img {
    width: 90%;
  }
}
</style>
<body>
    <nav class="navbar navbar-dark navbar-expand-md navigation-clean sticky-top" style="background-color: #111111;color: #191919;">
        <div class="container"><a class="navbar-brand" href="/" style="color: rgb(240,23,75);">smveczilla</a><button data-toggle="collapse" class="navbar-toggler text-white" data-target="#navcol-1" style="color: rgb(192,192,192);"><span class="sr-only" style="color: rgb(198,198,198);">Toggle navigation</span><span class="navbar-toggler-icon" style="color: rgb(184,184,184);"></span></button>
            <div
                class="collapse navbar-collapse" id="navcol-1">
                <ul class="nav navbar-nav ml-auto" style="font-size: 13px;">
                    <li class="nav-item" role="presentation"><a class="nav-link" href="/">HOME</a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="courses.html">COURSES</a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="team.html">TEAM</a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="events.html">EVENTS</a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="/#about">ABOUT</a></li>
                </ul>
        </div>
        </div>
    </nav>
    <div class="text-light" style="background-color: #191919;">
        <div class="container">
            <div class="row d-flex flex-column justify-content-center align-items-center">
                <img class="main-img" src="assets/img/zillalogo-01.png"/>
                <p class="h4 font-weight-bold">CERTIFICATE VERIFICATION</p>
                <div class="spinner-border text-primary" id="c_loader" role="status">
                    <span class="sr-only">Loading...</span>
                </div>                
                <p class="h5 font-weight-light" id="c_status"></p>
            </div>
        </div>
    </div>
    <div class="footer-basic" style="background-color: #191919;color: #ffffff;">
        <footer>
            <ul class="list-inline" style="font-size: 12px;">
                <li class="list-inline-item"><a href="/">Home</a></li>
                <li class="list-inline-item"><a href="/#contact">Contact</a></li>                
            </ul>
            <p class="copyright">Made with <i class="fa fa-heart" style="color: #f0174b;"></i>&nbsp; by smveczilla 2020</p>            
        </footer>
        <span id="beta" class="ml-1 small text-danger">V 1.0.0</span>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/main.js"></script>
</body>
<script>
    $(() => {
        let url = window.location.href;
        let url_string = new URL(url);
        var id = url_string.searchParams.get("id");
        var email = url_string.searchParams.get("email");
        var valid = url_string.searchParams.get("valid");

        if(id!==null&&id!==undefined&&id!=='' && email!==null&&email!==undefined&&email!=='') {
            // clear   

            if(valid!==null&&valid!==undefined&&valid!=='') {
                let validurl = `https://raw.githubusercontent.com/zillasmvec/sample/master/${valid}.json`;   
                $.ajax({
                url: validurl,
                method: "get",
                
                success: function(response) {                    
                    let data = JSON.parse(response);        

                    let dataArr = [];

                    dataArr.push(data.python);
                    dataArr.push(data.c);
                    dataArr.push(data.photoshop);
                    
                    var count = 1;
                    for(var i = 0; i < dataArr.length; i++) {
                        $.each(dataArr[i], function(pata) {    
                            let mail = dataArr[i][pata].Email.toLowerCase(); 
                            let mail2 = email.toLowerCase();                                                                                      
                            if(dataArr[i][pata].UUID === id && mail.trim() === mail2.trim()) {
                               count = 0;
                            }
                    });
                    }

                    if(count===0){
                        $('#c_loader').toggleClass('d-none');
                        $('#c_status').html('STATUS: <span class="badge badge-success badge-pill">VERIFIED</span>');
                    }else{
                        $('#c_loader').toggleClass('d-none');
                        $('#c_status').html('STATUS: <span class="badge badge-danger badge-pill">NOT VERIFIED</span>');                       
                    }
                   
                },
                error: function(error){
                    $('#c_loader').toggleClass('d-none');
                    $('#c_status').html('STATUS: <span class="badge badge-danger badge-pill">ERROR IN VERIFICATION</span><br/><p class="p-2">Getting back to home...</p>');
                    setTimeout(function() {
                        window.location.replace('/');
                    }, 3000);
            }
            });                     
            } else {
                let url = 'https://raw.githubusercontent.com/zillasmvec/sample/master/29.json';            
                let url1 = 'https://raw.githubusercontent.com/zillasmvec/sample/master/30.json';
                $.ajax({
                url: url,
                method: "get",
                
                success: function(response) {                    
                    let data = JSON.parse(response);        

                    let dataArr = [];

                    dataArr.push(data.python);
                    dataArr.push(data.c);
                    dataArr.push(data.photoshop);
                    
                    var count = 1;
                    for(var i = 0; i < dataArr.length; i++) {
                        $.each(dataArr[i], function(pata) {    
                            let mail = dataArr[i][pata].Email.toLowerCase(); 
                            let mail2 = email.toLowerCase();                                                                                      
                            if(dataArr[i][pata].UUID === id && mail.trim() === mail2.trim()) {
                               count = 0;
                            }
                    });
                    }

                    if(count===0){
                        $('#c_loader').toggleClass('d-none');
                        $('#c_status').html('STATUS: <span class="badge badge-success badge-pill">VERIFIED</span>');
                    }else{


                        $.ajax({
                            url: url1,
                            method: 'get',
                            success: function(res) {
                                let data = JSON.parse(res);        

                                let dataArr = [];

                                dataArr.push(data.python);
                                dataArr.push(data.c);
                                dataArr.push(data.photoshop);

                                var count2 = 1;
                                for(var i = 0; i < dataArr.length; i++) {
                                    $.each(dataArr[i], function(pata) {    
                                        let mail = dataArr[i][pata].Email.toLowerCase();   
                                        let mail2 = email.toLowerCase();                                                      
                                        if(dataArr[i][pata].UUID === id && mail.trim() === mail2.trim() ) {
                                            count2 = 0;
                                        }
                                });
                                }

                                if(count2===0){
                                    $('#c_loader').toggleClass('d-none');
                                    $('#c_status').html('STATUS: <span class="badge badge-success badge-pill">VERIFIED</span>');
                                }else{
                                    $('#c_loader').addClass('d-none');
                                    $('#c_status').html('STATUS: <span class="badge badge-danger badge-pill">NOT VERIFIED</span>');
                                }
                            },
                            error: function(error){
                                    $('#c_loader').toggleClass('d-none');
                                    $('#c_status').html('STATUS: <span class="badge badge-danger badge-pill">ERROR IN VERIFICATION</span><br/><p class="p-2">Getting back to home...</p>');
                                    setTimeout(function() {
                                        window.location.replace('/');
                                    }, 3000);
                            }
                        });
                       
                    }
                   

                },
                error: function(error){
                    $('#c_loader').toggleClass('d-none');
                    $('#c_status').html('STATUS: <span class="badge badge-danger badge-pill">ERROR IN VERIFICATION</span><br/><p class="p-2">Getting back to home...</p>');
                    setTimeout(function() {
                        window.location.replace('/');
                    }, 3000);
            }
            });
            }           
             

        } else {
            // false
            $('#c_loader').toggleClass('d-none');
            $('#c_status').html('STATUS: <span class="badge badge-danger badge-pill">NOT ALLOWED TO ACCESS THE SITE</span><br/><p class="p-2">Getting back to home...</p>');

            setTimeout(function() {
                window.location.replace('/');
            }, 3000);
        }
    });
</script>
</html>